<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>network survival estimator — network.survival.estimator_ • networkreporting</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="network survival estimator — network.survival.estimator_"><meta name="description" content="use an aggregate multiplicity estimator
and the respondents' own network size estimates
to estimate hidden population sizes"><meta property="og:description" content="use an aggregate multiplicity estimator
and the respondents' own network size estimates
to estimate hidden population sizes"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">networkreporting</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/network_scaleup.html">Analyzing network scale-up data using the networkreporting package</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>network survival estimator</h1>

      <div class="d-none name"><code>network.survival.estimator.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>use an aggregate multiplicity estimator
and the respondents' own network size estimates
to estimate hidden population sizes</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">network.survival.estimator_</span><span class="op">(</span></span>
<span>  <span class="va">resp.data</span>,</span>
<span>  <span class="va">attribute.data</span>,</span>
<span>  <span class="va">attribute.names</span>,</span>
<span>  <span class="va">known.populations</span>,</span>
<span>  total.kp.size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">weights</span>,</span>
<span>  <span class="va">attribute.weights</span>,</span>
<span>  within.alter.weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  boot.weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ego.id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  return.boot <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  dropmiss <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">network.survival.estimator</span><span class="op">(</span></span>
<span>  <span class="va">resp.data</span>,</span>
<span>  <span class="va">attribute.data</span>,</span>
<span>  <span class="va">attribute.names</span>,</span>
<span>  <span class="va">known.populations</span>,</span>
<span>  total.kp.size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">weights</span>,</span>
<span>  <span class="va">attribute.weights</span>,</span>
<span>  within.alter.weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  boot.weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ego.id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  return.boot <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  dropmiss <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-resp-data">resp.data<a class="anchor" aria-label="anchor" href="#arg-resp-data"></a></dt>
<dd><p>The dataframe that has a row for each respondent, with reported
connections to the groups of known size, as well as the attributes.
Note that the column names of the attributes should match
their names in <code>attribute.data</code></p></dd>


<dt id="arg-attribute-data">attribute.data<a class="anchor" aria-label="anchor" href="#arg-attribute-data"></a></dt>
<dd><p>A dataframe with the reported attributes of hidden population
members reported by survey respondents. There should be one
row for each time a respondent reports a hidden population member.
For example, to estimate death rates, there should be one row for
each report of a death.</p></dd>


<dt id="arg-attribute-names">attribute.names<a class="anchor" aria-label="anchor" href="#arg-attribute-names"></a></dt>
<dd><p>The names of the columns of attribute.data
and resp.data that contain the attribute information.</p></dd>


<dt id="arg-known-populations">known.populations<a class="anchor" aria-label="anchor" href="#arg-known-populations"></a></dt>
<dd><p>The names of the columns in <code>resp.data</code> that
have responses to the known population questions</p></dd>


<dt id="arg-total-kp-size">total.kp.size<a class="anchor" aria-label="anchor" href="#arg-total-kp-size"></a></dt>
<dd><p>The size of the probe alters, i.e., the sum of the known
population sizes</p></dd>


<dt id="arg-weights">weights<a class="anchor" aria-label="anchor" href="#arg-weights"></a></dt>
<dd><p>The weights or weights column for the respondent data</p></dd>


<dt id="arg-attribute-weights">attribute.weights<a class="anchor" aria-label="anchor" href="#arg-attribute-weights"></a></dt>
<dd><p>The weights or weights column for the alter data (this should typically
be the weight of the respondent who reported the alter)</p></dd>


<dt id="arg-within-alter-weights">within.alter.weights<a class="anchor" aria-label="anchor" href="#arg-within-alter-weights"></a></dt>
<dd><p>The weight or weights column for within-alter weights. This could be useful if,
for example, respondents only report about a subset of all of their alters. See Details.</p></dd>


<dt id="arg-boot-weights">boot.weights<a class="anchor" aria-label="anchor" href="#arg-boot-weights"></a></dt>
<dd><p>Optional dataframe with bootstrap resampled weights. See Details for more info.</p></dd>


<dt id="arg-ego-id">ego.id<a class="anchor" aria-label="anchor" href="#arg-ego-id"></a></dt>
<dd><p>If boot.weights are included, then this is the name of the
column(s) we need to join the bootstrap weights onto the dataset. This is
most often the id of the ego making the reports.</p></dd>


<dt id="arg-return-boot">return.boot<a class="anchor" aria-label="anchor" href="#arg-return-boot"></a></dt>
<dd><p>If TRUE, and if <code>boot.weights</code> is specified, then return each bootstrap estimate</p></dd>


<dt id="arg-dropmiss">dropmiss<a class="anchor" aria-label="anchor" href="#arg-dropmiss"></a></dt>
<dd><p>How to handle missingness in reported connections to known populations and number of deaths. See <code><a href="report.aggregator.html">report.aggregator</a></code></p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>If TRUE, print information to screen</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>the network reporting estimate of the hidden population's size
        (as a prevalence) broken down by the categories defined by all combinations
        of <code>attribute.names</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function takes two sources of data as input: first, it requires
a long-form dataframe with the attributes of the reported members of
the hidden population. For example, if we are asking about emigres and
we collect the age and sex of each reported emigrant, then the long form
dataset might look like:</p><table class="table table"><tr><td>age</td><td>sex</td><td>weight</td></tr><tr><td>15</td><td>m</td><td>2.10</td></tr><tr><td>58</td><td>f</td><td>1.15</td></tr><tr><td>33</td><td>m</td><td>3.67</td></tr></table><p>The second source of data we need is the known population responses for the
 respondents, along with the *same* attributes for each respondent. For
 example, in the situation above, we would also require a dataset like this
 to be passed in</p><table class="table table"><tr><td>age</td><td>sex</td><td>weight</td><td>hm.teachers</td><td>hm.nurses</td><td>...</td></tr><tr><td>20</td><td>f</td><td>2.10</td><td>4</td><td>0</td><td>...</td></tr><tr><td>44</td><td>m</td><td>1.65</td><td>0</td><td>2</td><td>...</td></tr><tr><td>60</td><td>m</td><td>2.75</td><td>1</td><td>1</td><td>...</td></tr></table></div>
    <div class="section level2">
    <h2 id="technical-note">Technical note<a class="anchor" aria-label="anchor" href="#technical-note"></a></h2>


<p>This function assumes that the sampling weights are standard analysis weights
and *not* relative weights. Standard analysis weights should provide an estimate
for the size of the frame population when added up; relative weights, on the other hand,
will sum to the number of respondents in the sample.  Demographic and Health surveys
typically have relative weights, which must be converted into standard sampling weights
before using this function.</p>
    </div>
    <div class="section level2">
    <h2 id="returned-dataframe">Returned dataframe<a class="anchor" aria-label="anchor" href="#returned-dataframe"></a></h2>


<p>Currently, the dataframe that is returned has columns for the attributes that death rates
were calculated for, along with:</p><ul><li><p><code>num.obs.deaths</code> - number of deaths reported</p></li>
<li><p><code>num.obs.degree</code> - number of respondents in cell used for estimating degree</p></li>
<li><p><code>y.F.Dcell.hat</code> - estimated total number connections from the frame to deaths</p></li>
<li><p><code>y.Fcell.kp.hat</code> - estimated total number of connections from (frame intersect cell) to the groups of known size</p></li>
<li><p><code>total.kp.size</code> - the total size of the groups of known size</p></li>
<li><p><code>N.Fcell.hat</code> - estimated size of (frame intersect cell) population (based on survey weights)</p></li>
<li><p><code>N.F.hat</code> - estimated size of frame population (based on survey weights)</p></li>
<li><p><code>asdr.hat</code> - the estimated death rate</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="todo">TODO<a class="anchor" aria-label="anchor" href="#todo"></a></h2>


<ul><li><p>handle missing values</p></li>
<li><p>allow passing in N.F (currently, we always estimate from weights)</p></li>
<li><p>write more general agg mult est fn and call that</p></li>
<li><p>make unit tests</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details-1">Details<a class="anchor" aria-label="anchor" href="#details-1"></a></h2>


<p>If you want estimated sampling variances, you can pass in a data frame <code>boot.weights</code>.
<code>boot.weights</code> is assumed to have a column that is named whatever the <code>ego.id</code> is,
and then a series of columns named <code>boot_weight_1</code>, ..., <code>boot_weight_M</code>.</p>
<p><code>ego.id</code> can either be a string or vector of strings, or it can be a named vector
like <code>c('a'='b')</code>. In the second case, <code>'a'</code> should be the name of the id column
in <code>resp.data</code>, while <code>'b'</code> should be the name of the id column in <code>'attribute.data'</code>.</p>
<p><code>within.alter.weight</code> is a weight for alters within a respondent. This is set to NULL by default, and
many applications will not need it. However, it can be helpful if respondents
are only asked to report about a subset of their alters. For example, suppose that respondents can report
about 10 alters in detail. Respondent A reports connections to 3 deaths, and respondent B reports connections to
12 deaths. When aggregating Respondent A's detailed reports, we would only need to use the sampling weight.
However, if we only used the sampling weight when aggregating Respondent B's reports, that would imply that
Respondent B only reported connections to 10 deaths. In this case, setting within.alter.weight to (12/10) for
Respondent B will make B's reports imply that she reported 12 deaths. Note that this makes the assumption that
the 10 deaths Respondent B did report are a uniformly random subsample of the 12 deaths she reports being connected to.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dennis M. Feehan.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

