<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Average personal network size estimates using known population method — kp.estimator_ • networkreporting</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Average personal network size estimates using known population method — kp.estimator_" />
<meta property="og:description" content="If given attribute.names, then this function produces
estimated average network sizes given by the groups that are defined by 
all combinations of the attributes; otherwise, it estimates the
average personal network size for the entire frame population." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5CY4HESMNP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-5CY4HESMNP');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">networkreporting</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Average personal network size estimates using known population method</h1>
    
    <div class="hidden name"><code>kp.estimator.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>If given <code>attribute.names</code>, then this function produces
estimated average network sizes given by the groups that are defined by 
all combinations of the attributes; otherwise, it estimates the
average personal network size for the entire frame population.</p>
    </div>

    <pre class="usage"><span class='fu'>kp.estimator_</span><span class='op'>(</span>
  <span class='va'>resp.data</span>,
  <span class='va'>known.populations</span>,
  <span class='va'>weights</span>,
  boot.weights <span class='op'>=</span> <span class='cn'>NULL</span>,
  ego.id <span class='op'>=</span> <span class='cn'>NULL</span>,
  return.boot <span class='op'>=</span> <span class='cn'>FALSE</span>,
  attribute.names <span class='op'>=</span> <span class='cn'>NULL</span>,
  total.kp.size <span class='op'>=</span> <span class='cn'>NULL</span>,
  alter.popn.size <span class='op'>=</span> <span class='cn'>NULL</span>,
  dropmiss <span class='op'>=</span> <span class='cn'>FALSE</span>,
  verbose <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span>

<span class='fu'>kp.estimator</span><span class='op'>(</span>
  <span class='va'>resp.data</span>,
  <span class='va'>known.populations</span>,
  <span class='va'>weights</span>,
  attribute.names <span class='op'>=</span> <span class='cn'>NULL</span>,
  total.kp.size <span class='op'>=</span> <span class='fl'>1</span>,
  alter.popn.size <span class='op'>=</span> <span class='cn'>NULL</span>,
  dropmiss <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>resp.data</th>
      <td><p>the dataframe that has the survey responses</p></td>
    </tr>
    <tr>
      <th>known.populations</th>
      <td><p>the names of the columns in <code>resp.data</code>
that have respondents' reports about connections to known populations</p></td>
    </tr>
    <tr>
      <th>weights</th>
      <td><p>the name of a column that has sampling weights</p></td>
    </tr>
    <tr>
      <th>boot.weights</th>
      <td><p>Optional dataframe with bootstrap resampled weights. See Details for more info.</p></td>
    </tr>
    <tr>
      <th>ego.id</th>
      <td><p>If boot.weights are included, then this is the name of the
column(s) we need to join the bootstrap weights onto the dataset. This is
most often the id of the ego making the reports.</p></td>
    </tr>
    <tr>
      <th>return.boot</th>
      <td><p>if TRUE and boot.weights are included, then return the full bootstrapped estiamates and not just the summaries;
this option causes this function to return a list instead of a tibble</p></td>
    </tr>
    <tr>
      <th>attribute.names</th>
      <td><p>the names of the columns in <code>resp.data</code> that
determine the subgroups for which average degree is estimated;
if NULL, then the average over all respondents is estimated</p></td>
    </tr>
    <tr>
      <th>total.kp.size</th>
      <td><p>the size of the probe alters; i.e., the sum of the known population
sizes. if NULL, then this is set to 1</p></td>
    </tr>
    <tr>
      <th>alter.popn.size</th>
      <td><p>the size of the population of alters; this is most
often the frame population, which is the default if nothing else is
specified; the size of the frame population is taken to be the sum
of the weights over all of resp.data</p></td>
    </tr>
    <tr>
      <th>dropmiss</th>
      <td><p>if FALSE, then, for each row, use only the reports about connections to known populations
that have no missingness. This effectively assumes that missing reports are 0.
if TRUE, then only use rows that have no missingness in reported connections to known
populations in estimating degree.
in this case, the sampling weights are rescaled so that the implied total
size of the frame population is not changed.
(see the 'dropmiss' argument to the function report.aggregator_)
future versions may have other options</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>if TRUE, print information to screen</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>the estimated average degree (<code>dbar.Fcell.F</code>) for respondents in each
        of the categories given by <code>attribute.names</code></p>
    <h2 class="hasAnchor" id="technical-note"><a class="anchor" href="#technical-note"></a>Technical note</h2>

    

<p>The estimated average degree is 
\((\sum y_{F_\alpha, A} / N_A) \times
     N_F / N_{F_\alpha}\)
here, we estimate \(N_F / N_{F_\alpha}\) by dividing the
total of all respondents' weights by the sum of
the weights for respondents in each cell \(\alpha\).</p>
    <h2 class="hasAnchor" id="todo"><a class="anchor" href="#todo"></a>TODO</h2>

    

<ul>
<li><p>make unit tests</p></li>
<li><p>think about how to elegantly add options for dbar_(P,Q) vs dbar_(Q,P)</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    

<p>If you want estimated sampling variances, you can pass in a data frame <code>boot.weights</code>.
<code>boot.weights</code> is assumed to have a column that is named whatever the <code>ego.id</code> is,
and then a series of columns named <code>boot_weight_1</code>, ..., <code>boot_weight_M</code>.</p>
<p>The two options for missing values are 'ignore' or 'complete.obs'.
'ignore' adds up each respondent's nonmissing reported connections to the known populations,
effectively treating missing reports as 0s.
'complete.obs' only uses responses from respondents who have non-missing values for all of
the known population reports.</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Dennis M. Feehan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


