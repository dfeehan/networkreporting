<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>nsum.internal.consistency — nsum.internal.consistency • networkreporting</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="nsum.internal.consistency — nsum.internal.consistency" />
<meta property="og:description" content="use a leave-one-out method to estimate the predictive
accuracy of the network scale-up estimator on the
known populations" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5CY4HESMNP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-5CY4HESMNP');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">networkreporting</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>nsum.internal.consistency</h1>
    
    <div class="hidden name"><code>nsum.internal.consistency.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>use a leave-one-out method to estimate the predictive
accuracy of the network scale-up estimator on the
known populations</p>
    </div>

    <pre class="usage"><span class='fu'>nsum.internal.consistency</span><span class='op'>(</span>
  <span class='va'>survey.data</span>,
  known.popns <span class='op'>=</span> <span class='cn'>NULL</span>,
  total.popn.size <span class='op'>=</span> <span class='cn'>NULL</span>,
  degrees <span class='op'>=</span> <span class='cn'>NULL</span>,
  missing <span class='op'>=</span> <span class='st'>"ignore"</span>,
  kp.method <span class='op'>=</span> <span class='cn'>TRUE</span>,
  weights <span class='op'>=</span> <span class='cn'>NULL</span>,
  alter.popn.size <span class='op'>=</span> <span class='cn'>NULL</span>,
  killworth.se <span class='op'>=</span> <span class='cn'>FALSE</span>,
  return.plot <span class='op'>=</span> <span class='cn'>FALSE</span>,
  verbose <span class='op'>=</span> <span class='cn'>FALSE</span>,
  bootstrap <span class='op'>=</span> <span class='cn'>FALSE</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>survey.data</th>
      <td><p>the dataframe with the survey results</p></td>
    </tr>
    <tr>
      <th>known.popns</th>
      <td><p>if not NULL, a vector whose entries are the size of the known
populations, and whose names are the variable names in the dataset
corresponding to each one. if NULL, then assume that the survey.data
dataframe has an attribute called 'known.popns' containing this vector.</p></td>
    </tr>
    <tr>
      <th>total.popn.size</th>
      <td><p>the size of the entire population. if NA,
this function works with proportions;
if NULL, it looks for the 'total.popn.size' attribute of the
dataset <code>survey.data</code>;
if not NULL or NA, it
works with absolute numbers (ie, the proportions * total popn size)</p></td>
    </tr>
    <tr>
      <th>degrees</th>
      <td><p>if not NULL, then the name or index of the column in the datset
containing the degree estimates. if NULL, then use the known population
method to estimate the degrees (see <code><a href='kp.degree.estimator.html'>kp.degree.estimator</a></code>)</p></td>
    </tr>
    <tr>
      <th>missing</th>
      <td><p>if "ignore", then proceed with the analysis without
doing anything about missing values. if "complete.obs"
then only use rows that have no missingness for the
computations (listwise deletion). care
must be taken in using this second option</p></td>
    </tr>
    <tr>
      <th>kp.method</th>
      <td><p>if TRUE, then we're using known population method estimates of the
degrees. this means we have to recompute the degrees each time we
hold out a known subgroup. if the degrees come from another estimator,
like the summation method, then we don't need to do that since we
don't use the ARD questions in coming up with the degree estimate.</p></td>
    </tr>
    <tr>
      <th>weights</th>
      <td><p>if not NULL, weights to use in computing the estimate. this
should be the name of the column in the survey.data which has
the variable with the appropriate weights. these weights
should be construted so that, eg, the mean of the degrees is
estimated as (1/n) * \sum_i w_i * d_i</p></td>
    </tr>
    <tr>
      <th>alter.popn.size</th>
      <td><p>the size of the population of alters; this is most
often the frame population, which is the default if nothing else is
specified; the size of the frame population is taken to be the sum
of the weights over all of survey.data</p></td>
    </tr>
    <tr>
      <th>killworth.se</th>
      <td><p>if TRUE, return the Killworth et al estimate of the standard error</p></td>
    </tr>
    <tr>
      <th>return.plot</th>
      <td><p>if TRUE, make and return a ggplot2 plot object</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>if TRUE, report more detailed information about what's going on</p></td>
    </tr>
    <tr>
      <th>bootstrap</th>
      <td><p>if TRUE, use <code><a href='https://rdrr.io/pkg/surveybootstrap/man/bootstrap.estimates.html'>surveybootstrap::bootstrap.estimates</a></code> to take bootstrap resamples
in order to obtain intervals around each estimate. in this case,
you are expected to also pass in at least <code>bootstrap.fn</code>,
<code>survey.design</code>, and <code>num.reps</code></p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional arguments, which are passed on to <code><a href='https://rdrr.io/pkg/surveybootstrap/man/bootstrap.estimates.html'>surveybootstrap::bootstrap.estimates</a></code>
if <code>bootstrap</code> is TRUE</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a list with a dataset containing the subpopn-specific estimates, as well as
        several summaries of the accuracy of those estimates, including
        mae (mean absolute error), mse (mean squared error),
        rmse (root mean squared error), and are (average relative error)</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>given a set of estimated degrees, responses to a group
of ARD questions, and the total size of the populations
that the ARD questions ask about, this function estimates
the accuracy of the network scale-up method by dropping
each known population in turn, using the non-dropped
populations to compute the degree and an estimate of the
size of the known population, and comparing the result
to the actual size of the known population</p>
<p>* TODO -- document bootstrap ci option better<br />   
* TODO -- make amenable to parallelization<br /></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='va'>ic.result</span> <span class='op'>&lt;-</span> 
  <span class='fu'>nsum.internal.consistency</span><span class='op'>(</span>survey.data<span class='op'>=</span><span class='va'>recoded.dat</span>,
                            known.popns<span class='op'>=</span><span class='va'>kp.totals</span>,
                            missing<span class='op'>=</span><span class='st'>"complete.obs"</span>,
                            killworth.se<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kp.method<span class='op'>=</span><span class='cn'>TRUE</span>,
                            alter.popn.size<span class='op'>=</span><span class='va'>total.popn.size</span>,
                            return.plot<span class='op'>=</span><span class='cn'>TRUE</span>,
                            bootstrap<span class='op'>=</span><span class='cn'>TRUE</span>,
                            bootstrap.fn<span class='op'>=</span><span class='st'>"rescaled.bootstrap.sample"</span>,
                            survey.design<span class='op'>=</span><span class='op'>~</span> <span class='va'>cluster</span>,
                            num.reps<span class='op'>=</span><span class='fl'>100</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Dennis M. Feehan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


