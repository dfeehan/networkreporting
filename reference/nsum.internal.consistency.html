<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>nsum.internal.consistency — nsum.internal.consistency • networkreporting</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="nsum.internal.consistency — nsum.internal.consistency"><meta name="description" content="use a leave-one-out method to estimate the predictive
accuracy of the network scale-up estimator on the
known populations"><meta property="og:description" content="use a leave-one-out method to estimate the predictive
accuracy of the network scale-up estimator on the
known populations"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">networkreporting</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/network_scaleup.html">Analyzing network scale-up data using the networkreporting package</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>nsum.internal.consistency</h1>

      <div class="d-none name"><code>nsum.internal.consistency.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>use a leave-one-out method to estimate the predictive
accuracy of the network scale-up estimator on the
known populations</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">nsum.internal.consistency</span><span class="op">(</span></span>
<span>  <span class="va">survey.data</span>,</span>
<span>  known.popns <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  total.popn.size <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  degrees <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  missing <span class="op">=</span> <span class="st">"ignore"</span>,</span>
<span>  kp.method <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  alter.popn.size <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  killworth.se <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  return.plot <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  bootstrap <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-survey-data">survey.data<a class="anchor" aria-label="anchor" href="#arg-survey-data"></a></dt>
<dd><p>the dataframe with the survey results</p></dd>


<dt id="arg-known-popns">known.popns<a class="anchor" aria-label="anchor" href="#arg-known-popns"></a></dt>
<dd><p>if not NULL, a vector whose entries are the size of the known
populations, and whose names are the variable names in the dataset
corresponding to each one. if NULL, then assume that the survey.data
dataframe has an attribute called 'known.popns' containing this vector.</p></dd>


<dt id="arg-total-popn-size">total.popn.size<a class="anchor" aria-label="anchor" href="#arg-total-popn-size"></a></dt>
<dd><p>the size of the entire population. if NA,
this function works with proportions;
if NULL, it looks for the 'total.popn.size' attribute of the
dataset <code>survey.data</code>;
if not NULL or NA, it
works with absolute numbers (ie, the proportions * total popn size)</p></dd>


<dt id="arg-degrees">degrees<a class="anchor" aria-label="anchor" href="#arg-degrees"></a></dt>
<dd><p>if not NULL, then the name or index of the column in the datset
containing the degree estimates. if NULL, then use the known population
method to estimate the degrees (see <code><a href="kp.degree.estimator.html">kp.degree.estimator</a></code>)</p></dd>


<dt id="arg-missing">missing<a class="anchor" aria-label="anchor" href="#arg-missing"></a></dt>
<dd><p>if "ignore", then proceed with the analysis without
doing anything about missing values. if "complete.obs"
then only use rows that have no missingness for the
computations (listwise deletion). care
must be taken in using this second option</p></dd>


<dt id="arg-kp-method">kp.method<a class="anchor" aria-label="anchor" href="#arg-kp-method"></a></dt>
<dd><p>if TRUE, then we're using known population method estimates of the
degrees. this means we have to recompute the degrees each time we
hold out a known subgroup. if the degrees come from another estimator,
like the summation method, then we don't need to do that since we
don't use the ARD questions in coming up with the degree estimate.</p></dd>


<dt id="arg-weights">weights<a class="anchor" aria-label="anchor" href="#arg-weights"></a></dt>
<dd><p>if not NULL, weights to use in computing the estimate. this
should be the name of the column in the survey.data which has
the variable with the appropriate weights. these weights
should be construted so that, eg, the mean of the degrees is
estimated as (1/n) * \sum_i w_i * d_i</p></dd>


<dt id="arg-alter-popn-size">alter.popn.size<a class="anchor" aria-label="anchor" href="#arg-alter-popn-size"></a></dt>
<dd><p>the size of the population of alters; this is most
often the frame population, which is the default if nothing else is
specified; the size of the frame population is taken to be the sum
of the weights over all of survey.data</p></dd>


<dt id="arg-killworth-se">killworth.se<a class="anchor" aria-label="anchor" href="#arg-killworth-se"></a></dt>
<dd><p>if TRUE, return the Killworth et al estimate of the standard error</p></dd>


<dt id="arg-return-plot">return.plot<a class="anchor" aria-label="anchor" href="#arg-return-plot"></a></dt>
<dd><p>if TRUE, make and return a ggplot2 plot object</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>if TRUE, report more detailed information about what's going on</p></dd>


<dt id="arg-bootstrap">bootstrap<a class="anchor" aria-label="anchor" href="#arg-bootstrap"></a></dt>
<dd><p>if TRUE, use <code><a href="https://rdrr.io/pkg/surveybootstrap/man/bootstrap.estimates.html" class="external-link">surveybootstrap::bootstrap.estimates</a></code> to take bootstrap resamples
in order to obtain intervals around each estimate. in this case,
you are expected to also pass in at least <code>bootstrap.fn</code>,
<code>survey.design</code>, and <code>num.reps</code></p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>additional arguments, which are passed on to <code><a href="https://rdrr.io/pkg/surveybootstrap/man/bootstrap.estimates.html" class="external-link">surveybootstrap::bootstrap.estimates</a></code>
if <code>bootstrap</code> is TRUE</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a list with a dataset containing the subpopn-specific estimates, as well as
        several summaries of the accuracy of those estimates, including
        mae (mean absolute error), mse (mean squared error),
        rmse (root mean squared error), and are (average relative error)</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>given a set of estimated degrees, responses to a group
of ARD questions, and the total size of the populations
that the ARD questions ask about, this function estimates
the accuracy of the network scale-up method by dropping
each known population in turn, using the non-dropped
populations to compute the degree and an estimate of the
size of the known population, and comparing the result
to the actual size of the known population</p>
<p>* TODO – document bootstrap ci option better<br>
* TODO – make amenable to parallelization<br></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">ic.result</span> <span class="op">&lt;-</span> </span></span>
<span class="r-in"><span>  <span class="fu">nsum.internal.consistency</span><span class="op">(</span>survey.data<span class="op">=</span><span class="va">recoded.dat</span>,</span></span>
<span class="r-in"><span>                            known.popns<span class="op">=</span><span class="va">kp.totals</span>,</span></span>
<span class="r-in"><span>                            missing<span class="op">=</span><span class="st">"complete.obs"</span>,</span></span>
<span class="r-in"><span>                            killworth.se<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                            kp.method<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                            alter.popn.size<span class="op">=</span><span class="va">total.popn.size</span>,</span></span>
<span class="r-in"><span>                            return.plot<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                            bootstrap<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                            bootstrap.fn<span class="op">=</span><span class="st">"rescaled.bootstrap.sample"</span>,</span></span>
<span class="r-in"><span>                            survey.design<span class="op">=</span><span class="op">~</span> <span class="va">cluster</span>,</span></span>
<span class="r-in"><span>                            num.reps<span class="op">=</span><span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dennis M. Feehan.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

